{% load static %}
{% load i18n %}
<nav class="topbar" role="navigation" aria-label="{% trans 'Navigarea principală' %}">
  <!-- Logo -->
  <a href="{% url 'home' %}" class="logo" aria-label="PsychED Lab - {% trans 'Intoarcere la pagina principală' %}">PsychED Lab</a>

  <!-- Mobile Menu Toggle -->
  <button 
  class="mobile-menu-toggle" 
  aria-label="{% trans 'Deschide meniul principal' %}"
  aria-expanded="false"
  aria-controls="main-menu"
>
  <span class="hamburger" aria-hidden="true"></span>
  <span class="menu-label visually-hidden">{% trans "Meniu" %}</span>
</button>

  <!-- Navigation Menu -->
  <ul id="main-menu" class="nav-menu">
    <!-- Regular Navigation Items -->
    <li class="nav-menu__item">
      <a href="{% url 'home' %}" 
         class="nav-menu__link {% if request.path == '/' %}active{% endif %}"
         {% if request.path == '/' %}aria-current="page"{% endif %}
      >
        {% trans "Acasă" %}
      </a>
    </li>

    <li class="nav-menu__item">
      <a href="{% url 'about' %}" 
         class="nav-menu__link {% if request.path == '/despre-mine/' %}active{% endif %}"
         {% if request.path == '/despre-mine/' %}aria-current="page"{% endif %}
      >
        {% trans "Despre mine" %}
      </a>
    </li>

    <li class="nav-menu__item">
      <a href="{% url 'services' %}" 
         class="nav-menu__link {% if request.path == '/servicii/' %}active{% endif %}"
         {% if request.path == '/servicii/' %}aria-current="page"{% endif %}
      >
        {% trans "Servicii" %}
      </a>
    </li>

    <li class="nav-menu__item">
      <a href="{% url 'home' %}#contact-section" 
         class="nav-menu__link scroll-to-contact"
         aria-label="{% trans 'Secțiunea de contact' %}"
      >
        {% trans "Contact" %}
      </a>
    </li>

    <!-- Social Media Links -->
    <li class="nav-menu__item">
      <a href="https://www.linkedin.com/in/cristiana-francesca-raileanu-76862710a/"
         class="nav-menu__link nav-menu__link--social"
         target="_blank"
         rel="noopener noreferrer"
         aria-label="{% trans 'Vizitează profilul LinkedIn' %}"
      >
        <i class="fab fa-linkedin" aria-hidden="true"></i>
        <span class="visually-hidden">LinkedIn</span>
      </a>
    </li>

<li class="nav-menu__item desktop-language-selector">
  <div class="language-selector">
    <button type="button" class="language-button" aria-haspopup="true" aria-expanded="false">
      {% if LANGUAGE_CODE == 'en' %}
        <img src="{% static 'images/flags/gb.svg' %}" alt="English" class="flag-icon">
      {% elif LANGUAGE_CODE == 'es' %}
        <img src="{% static 'images/flags/es.svg' %}" alt="Español" class="flag-icon">
      {% else %}
        <img src="{% static 'images/flags/ro.svg' %}" alt="Română" class="flag-icon">
      {% endif %}
    </button>
    
    <div class="language-dropdown">
      <form action="{% url 'set_language' %}" method="post" class="language-form">
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ request.path|slice:'3:' }}">
        
        <button type="submit" name="language" value="ro" class="language-option {% if LANGUAGE_CODE == 'ro' %}active{% endif %}">
          <img src="{% static 'images/flags/ro.svg' %}" alt="" class="flag-icon">
          <span>Română</span>
        </button>

        <button type="submit" name="language" value="en" class="language-option {% if LANGUAGE_CODE == 'en' %}active{% endif %}">
          <img src="{% static 'images/flags/gb.svg' %}" alt="" class="flag-icon">
          <span>English</span>
        </button>

        <button type="submit" name="language" value="es" class="language-option {% if LANGUAGE_CODE == 'es' %}active{% endif %}">
          <img src="{% static 'images/flags/es.svg' %}" alt="" class="flag-icon">
          <span>Español</span>
        </button>
      </form>
    </div>
  </div>
</li>
<li class="nav-menu__item mobile-language-options">
  <form action="{% url 'set_language' %}" method="post" class="mobile-language-form">
    {% csrf_token %}
    <input type="hidden" name="next" value="{{ request.path|slice:'3:' }}">
    
    <button type="submit" name="language" value="ro" class="nav-menu__link nav-menu__link--language {% if LANGUAGE_CODE == 'ro' %}active{% endif %}">
      <img src="{% static 'images/flags/ro.svg' %}" alt="" class="nav-menu__flag">
      <span>Română</span>
    </button>

    <button type="submit" name="language" value="en" class="nav-menu__link nav-menu__link--language {% if LANGUAGE_CODE == 'en' %}active{% endif %}">
      <img src="{% static 'images/flags/gb.svg' %}" alt="" class="nav-menu__flag">
      <span>English</span>
    </button>

    <button type="submit" name="language" value="es" class="nav-menu__link nav-menu__link--language {% if LANGUAGE_CODE == 'es' %}active{% endif %}">
      <img src="{% static 'images/flags/es.svg' %}" alt="" class="nav-menu__flag">
      <span>Español</span>
    </button>
  </form>
</li>

  </ul>
</nav>
